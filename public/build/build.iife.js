var N=(e,f,i)=>new Promise((y,m)=>{var _=s=>{try{d(i.next(s))}catch(g){m(g)}},S=s=>{try{d(i.throw(s))}catch(g){m(g)}},d=s=>s.done?y(s.value):Promise.resolve(s.value).then(_,S);d((i=i.apply(e,f)).next())});(function(e){"use strict";const f=(c,l)=>{const a=c.__vccOpts||c;for(const[p,n]of l)a[p]=n;return a},i={class:"screeningInfoArea"},y={class:"screeningInfoHeader"},m={key:0,class:"screeningInfoLoading"},_={key:1,class:"screeningInfoError"},S={key:2,class:"screeningInfoFields"},d={class:"screeningInfoField"},s={class:"screeningInfoFieldHeader"},g={key:0},O={key:1},D={class:"screeningInfoField"},F={class:"screeningInfoFieldHeader"},V={key:0},I={key:1},b={key:0,class:"screeningInfoFieldBody"},C={class:"screeningInfoField"},P={class:"screeningInfoFieldHeader"},U={key:0},x={key:1},z={class:"screeningInfoField"},M={class:"screeningInfoFieldHeader"},L={key:0},w={key:1},A={key:2},H={key:0,class:"screeningInfoFieldBody"},W={class:"screeningInfoField"},j={class:"screeningInfoFieldHeader"},q={key:0},$={key:1},G={key:2},J={key:3},K={key:4},Q={key:0,class:"screeningInfoFieldBody"},R=f({__name:"ScreeningInfo",props:{submission:{type:Object,required:!0}},setup(c){const{useLocalize:l}=pkp.modules.useLocalize,{useUrl:a}=pkp.modules.useUrl,{useFetch:p}=pkp.modules.useFetch,{t:n}=l(),o=c,t=e.ref({}),E=e.ref(!0),k=e.ref(null),{apiUrl:T}=a(`submissions/${o.submission.id}/screening`),{data:X,fetch:Y}=p(T);function h(){return N(this,null,function*(){E.value=!0,k.value=null;try{yield Y(),t.value=X.value||{}}catch(r){k.value="Failed to load screening data"}finally{E.value=!1}})}function Z(r){return r==="Okay"?"screeningStatusOkay":r!=null&&r.includes("Unable")?"screeningStatusNotOkay":"screeningStatusWarning"}return e.onMounted(()=>{h()}),e.watch(()=>o.submission.id,()=>{h()}),(r,ne)=>{var u;const v=e.resolveComponent("PkpSpinner");return e.openBlock(),e.createElementBlock("div",i,[e.createElementVNode("div",y,[e.createElementVNode("h2",null,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.name")),1),e.createElementVNode("p",null,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.description")),1)]),E.value?(e.openBlock(),e.createElementBlock("div",m,[e.createVNode(v)])):k.value?(e.openBlock(),e.createElementBlock("div",_,[e.createElementVNode("p",null,e.toDisplayString(k.value),1)])):(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("div",d,[e.createElementVNode("div",s,[e.createElementVNode("span",{class:e.normalizeClass(t.value.statusMetadataEnglish?"screeningStatusOkay":"screeningStatusNotOkay")},null,2),t.value.statusMetadataEnglish?(e.openBlock(),e.createElementBlock("span",g,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.metadataEnglishOkay")),1)):(e.openBlock(),e.createElementBlock("span",O,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.metadataEnglishNotOkay",{missingMetadata:t.value.missingMetadataEnglish})),1))])]),e.createElementVNode("div",D,[e.createElementVNode("div",F,[e.createElementVNode("span",{class:e.normalizeClass(t.value.statusAffiliation?"screeningStatusOkay":"screeningStatusNotOkay")},null,2),t.value.statusAffiliation?(e.openBlock(),e.createElementBlock("span",V,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.affiliationOkay")),1)):(e.openBlock(),e.createElementBlock("span",I,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.affiliationNotOkay")),1))]),!t.value.statusAffiliation&&((u=t.value.authorsWithoutAffiliation)!=null&&u.length)?(e.openBlock(),e.createElementBlock("div",b,[e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.value.authorsWithoutAffiliation,B=>(e.openBlock(),e.createElementBlock("li",{key:B},e.toDisplayString(B),1))),128))])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",C,[e.createElementVNode("div",P,[e.createElementVNode("span",{class:e.normalizeClass(t.value.statusOrcid?"screeningStatusOkay":"screeningStatusNotOkay")},null,2),t.value.statusOrcid?(e.openBlock(),e.createElementBlock("span",U,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.orcidOkay")),1)):(e.openBlock(),e.createElementBlock("span",x,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.orcidNotOkay")),1))])]),e.createElementVNode("div",z,[e.createElementVNode("div",M,[e.createElementVNode("span",{class:e.normalizeClass(t.value.statusPDFs?"screeningStatusOkay":"screeningStatusNotOkay")},null,2),t.value.numPDFs===0?(e.openBlock(),e.createElementBlock("span",L,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.noPDFs")),1)):t.value.numPDFs>1?(e.openBlock(),e.createElementBlock("span",w,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.manyPDFs.header")),1)):(e.openBlock(),e.createElementBlock("span",A,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.pdfsOkay")),1))]),t.value.numPDFs>1?(e.openBlock(),e.createElementBlock("div",H,[e.createElementVNode("ul",null,[e.createElementVNode("li",null,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.manyPDFs.body")),1)])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",W,[e.createElementVNode("div",j,[e.createElementVNode("span",{class:e.normalizeClass(Z(t.value.statusDocumentOrcids))},null,2),t.value.statusDocumentOrcids==="Okay"?(e.openBlock(),e.createElementBlock("span",q,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.documentOrcidsOkay")),1)):t.value.statusDocumentOrcids==="UnableNoFile"?(e.openBlock(),e.createElementBlock("span",$,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.documentOrcidsUnableNoFile")),1)):t.value.statusDocumentOrcids==="UnableNoOrcids"?(e.openBlock(),e.createElementBlock("span",G,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.documentOrcidsUnableNoOrcids")),1)):t.value.statusDocumentOrcids==="UnableException"?(e.openBlock(),e.createElementBlock("span",J,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.documentOrcidsUnableException")),1)):(e.openBlock(),e.createElementBlock("span",K,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.documentOrcidsNotOkay.header")),1))]),t.value.statusDocumentOrcids==="NotOkay"?(e.openBlock(),e.createElementBlock("div",Q,[e.createElementVNode("ul",null,[e.createElementVNode("li",null,e.toDisplayString(e.unref(n)("plugins.generic.scieloScreening.info.documentOrcidsNotOkay.body")),1)])])):e.createCommentVNode("",!0)])]))])}}},[["__scopeId","data-v-636de3a5"]]);pkp.registry.registerComponent("ScreeningInfo",R),pkp.registry.storeExtend("workflow",c=>{const l=c.store,{useLocalize:a}=pkp.modules.useLocalize,{t:p}=a();l.extender.extendFn("getMenuItems",(n,o)=>[...n,{key:"scieloScreening",label:p("plugins.generic.scieloScreening.info.name"),state:{primaryMenuItem:"scieloScreening"}}]),l.extender.extendFn("getPrimaryItems",(n,o)=>{var t;return((t=o==null?void 0:o.selectedMenuState)==null?void 0:t.primaryMenuItem)==="scieloScreening"?[{component:"ScreeningInfo",props:{submission:o.submission}}]:n})})})(pkp.modules.vue);
